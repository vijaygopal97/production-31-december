# Stress Test Report - Comprehensive 5-Minute Test

**Test ID:** comprehensive-5min-1768162856340  
**Date:** January 11, 2026, 20:26 UTC  
**Duration:** 300 seconds (5 minutes)  
**Survey ID:** 68fd1915d41841da463f0d46

---

## ‚úÖ Test Completion Status

**Status:** COMPLETED SUCCESSFULLY  
**Cleanup:** ‚úÖ All test data cleaned up
- 63 quality checks reverted
- 100 test responses deleted

---

## üìä Final Test Results

### User Type Performance

| User Type | Total Requests | Successful | Failed | Success Rate | Avg Response Time (ms) |
|-----------|---------------|------------|--------|--------------|------------------------|
| **Quality Agents** | 1,350 | 254 | 1,096 | **18.81%** ‚ö†Ô∏è | 5,586 |
| **CATI Interviewers** | 500 | 0 | 500 | **0.00%** ‚ùå | 30,060 |
| **CAPI Interviewers** | 5,300 | 5,300 | 0 | **100.00%** ‚úÖ | 1,961 |
| **Project Managers** | 540 | 540 | 0 | **100.00%** ‚úÖ | 4,856 |
| **Company Admins** | 120 | 120 | 0 | **100.00%** ‚úÖ | 4,719 |

### Summary Statistics

- **Total Requests:** 7,810
- **Total Successful:** 6,214
- **Total Failed:** 1,596
- **Overall Success Rate:** 79.56%

---

## üñ•Ô∏è System Performance Metrics

### Primary Server (13.202.181.167)

- **CPU Usage:**
  - Average: 27.34%
  - Maximum: 50.76%
  - Minimum: 0.63%
  - Status: ‚úÖ Healthy

- **Memory Usage:**
  - Average Used: 11,001 MB (34.86%)
  - Maximum Used: 11,754 MB (37.25%)
  - Status: ‚úÖ Healthy

- **Workers:** 8 (matching VCPUs)

### Secondary Server (3.109.82.159)

- **Status:** ‚ö†Ô∏è CRITICAL OVERLOAD
- **Load Average:** 122+ (1,525% of 8 cores)
- **CPU Usage:** 95%+
- **Issue:** Secondary server was severely overloaded throughout the test

### MongoDB Database

- **Connections:**
  - Average: 181.72
  - Maximum: 190
  - Minimum: 171
  - Status: ‚úÖ Healthy (0.36% of 51,200 max)

- **Replica Set:** Healthy
  - Primary: 172.31.43.71:27017 (Lag: 0.61s)
  - Secondary: 172.31.47.152:27017 (Lag: 2.61s)

---

## üìà API Performance

- **Average Response Time:** 4,629 ms
- **Minimum Response Time:** 151 ms
- **Maximum Response Time:** 30,167 ms
- **P95 Response Time:** 30,032 ms
- **P99 Response Time:** 30,086 ms

---

## üîç Key Findings

### ‚úÖ Strengths

1. **CAPI Interviewers:** Perfect 100% success rate with fast response times (1.96s avg)
2. **Project Managers:** Perfect 100% success rate
3. **Company Admins:** Perfect 100% success rate
4. **Primary Server:** Handled load well (27% avg CPU, 35% memory)
5. **MongoDB:** Not a bottleneck (only 0.36% connections used)

### ‚ö†Ô∏è Critical Issues

1. **CATI Interviewers:** 0% success rate
   - All 500 requests failed
   - Average response time: 30 seconds (timeout)
   - Root cause: Secondary server overload + external API calls

2. **Quality Agents:** Only 18.81% success rate
   - 1,096 out of 1,350 requests failed
   - Average response time: 5.6 seconds
   - Root cause: Heavy MongoDB aggregation queries hitting overloaded secondary server

3. **Secondary Server Overload:**
   - Load average: 122+ (should be < 8)
   - CPU: 95%+
   - This is the primary bottleneck affecting Quality Agents and CATI Interviewers

---

## üéØ Test Configuration

- **Scale:** Reduced from 500 to 50 concurrent users per type
  - 50 Quality Agents
  - 50 CATI Interviewers
  - 50 CAPI Interviewers
  - 10 Project Managers
  - 2 Company Admins
- **Total Emulators:** 162
- **Duration:** 5 minutes continuous load
- **Load Balancing:** Nginx with least_conn algorithm
  - Primary weight: 5 (62.5%)
  - Secondary weight: 3 (37.5%)

---

## üìÅ Report Files

All reports are located in: `/var/www/opine/stress-tests/situation-1-quality-checks/reports/`

1. **Metrics JSON:** `metrics-comprehensive-5min-1768162856340.json` (634KB)
   - Detailed system metrics collected every 5 seconds
   - CPU, memory, MongoDB connections, API response times

2. **Results JSON:** `results-comprehensive-5min-1768162856340.json` (1.8KB)
   - Final statistics and summary
   - User type performance breakdown

3. **Metrics CSV:** `metrics-comprehensive-5min-1768162856340.csv` (26KB)
   - Time-series data for analysis in Excel/Google Sheets

4. **Log File:** `logs/comprehensive-5min-20260111-202055.log`
   - Complete test execution log

---

## üîß Recommendations

### Immediate Actions

1. **Fix Secondary Server Overload:**
   - Investigate why secondary is receiving heavy operations
   - Consider route-based load balancing (heavy ops ‚Üí primary only)
   - Add Redis caching for Quality Agent assignment queries

2. **Optimize Quality Agent Endpoints:**
   - Review MongoDB aggregation queries
   - Add indexes if missing
   - Consider caching frequently accessed data

3. **CATI Interviewer Issues:**
   - Review external API integration
   - Add timeout handling and retry logic
   - Consider async processing for external calls

### Long-Term Improvements

1. **Add Third Server:** Distribute load across 3 servers
2. **Implement Caching:** Redis for frequently accessed data
3. **Database Optimization:** Review and optimize slow queries
4. **Monitoring:** Add real-time alerts for server overload

---

## üìù Notes

- All test data was successfully cleaned up
- No production data was modified or lost
- Test completed full 5-minute duration
- HTML report generation failed (TypeError with timestamp) - JSON/CSV reports are available

---

**Report Generated:** January 11, 2026  
**Test Completed:** ‚úÖ Successfully





